<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de RA - Ativação por Toque</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; }
        model-viewer { width: 100%; height: 100%; --ar-status-prompt-display: none; }
        #ar-prompt {
            position: absolute;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%);
            text-align: center;
            padding: 12px;
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-family: sans-serif;
            font-size: 16px;
            display: none; /* Começa oculto */
        }
    </style>
</head>
<body>

    <model-viewer id="bike-viewer"
                  src="bicicleta-will.glb"
                  alt="Um modelo 3D de uma bicicleta"
                  ar
                  ar-modes="webxr scene-viewer quick-look"
                  camera-controls
                  touch-action="pan-y"
                  ios-src="bicicleta-will.usdz">
    </model-viewer>

    <div id="ar-prompt">Toque no objeto para iniciar a câmera</div>

    <script>
        const modelViewer = document.querySelector('#bike-viewer');
        const arPrompt = document.querySelector('#ar-prompt');

        modelViewer.addEventListener('load', () => {
            // Mostra o aviso para tocar na tela
            arPrompt.style.display = 'block';
            
            // Define um evento de clique para ativar a RA
            modelViewer.addEventListener('click', () => {
                console.log('Tentando ativar o modo RA...');
                modelViewer.activateAR().catch((error) => {
                    console.error('Falha ao ativar a RA:', error);
                    alert('Não foi possível iniciar a câmera. Verifique as permissões e se o seu navegador é compatível.');
                });
            });
        });
    </script>

</body>
</html>
